<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>Big Water Consulting Client Map</title>
    
    <!-- Import jQuery (if Squarespace already includes it, you can remove this line) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <!-- Leaflet CSS and JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <style>
        body, #map {
            margin: 0;
            position: relative;
        }
        html, body, #map { height: 100%; }

        h1, h2, h3, h4, h5, h6 {
            font-weight: 400;
            font-family: "Open Sans", sans-serif;
            line-height: 1.2;
        }

        .leaflet-popup-content {
            text-align: center;
            color: black;
            font-weight: 300;
        }

        .leaflet-popup-tip-container {
            display: none !important;
        }

        #popupimg img {
            width: 100%;
            height: 75%;
        }
    </style>
</head>

<body>
    <!-- Placeholder for Map -->
    <div id="map"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Define map token
            var token = 'pk.eyJ1Ijoic2Fta2d1ZXJyZXJvIiwiYSI6ImNpZ2xvejdxcTAyMTR1YWtyMm43YTNsc2QifQ.bwV2-5rCqbn5ITvF1F6AJw';

            // Initialize map with dynamic zoom level
            var map = L.map('map', { scrollWheelZoom: false }).setView([54, -125], $(window).width() > 1460 && $(window).height() > 900 ? 4 : 3);

            // Add tile layer
            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
                attribution: 'Map tiles by <a href="https://carto.com">Carto</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a> | Prepared by <a href="http://www.bigwaterconsulting.net">Big Water Consulting</a>'
            }).addTo(map);

            // Define custom popup options
            var customOptions = {
                'maxWidth': '250',
                'maxHeight': '200',
                'className': 'custom'
            };

            // Function to define popups
            function onEachFeature(feature, layer) {
                var custom_popup = '<h3>' + feature.properties.curl + '</h3>' + feature.properties.cimage;
                layer.bindPopup(custom_popup, customOptions);
            }

            // GeoJSON data
            var data = {
                "type": "FeatureCollection",
                "features": [
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-114.1147261972959, 47.62534062543333]
                        },
                        "properties": {
                            "name": "Salish and Kootenai Housing Authority",
                            "refid": "skha",
                            "url": "https://skha.org/",
                            "formalname": "Salish and Kootenai Housing Authority",
                            "descriptio": "Flathead Indian Reservation, Montana",
                            "curl": "<a href=\"https://skha.org/\" target=\"_blank\">Salish and Kootenai Housing Authority</a>",
                            "cimage": "<a href='https://skha.org/' target=\"_blank\"><img src=\"https://yourdomain.com/path-to-image/SKHA_Logo_RGB.png\" width=\"100px\" height=\"125px\"></a>"
                        }
                    },
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-122.88707054170864,39.02021815055719]
                        },
                        "properties": {
                            "name": "Big Valley Rancheria",
                            "refid": "bvr",
                            "url": "https://www.bvrancheria.com/",
                            "formalname": "Big Valley Band of Pomo Indians",
                            "descriptio": "Big Valley Rancheria, California",
                            "curl": "<a href=\"https://www.bvrancheria.com/\" target=\"_blank\">Big Valley Rancheria</a>",
                            "cimage": "<a href='https://www.bvrancheria.com/' target=\"_blank\"><img src=\"https://yourdomain.com/path-to-image/BVR-Logo.png\" width=\"125px\" height=\"140px\"></a>"
                        }
                    },
                    // Additional features can be added here
                ]
            };

            // Add GeoJSON data to the map
            L.geoJson(data, {
                pointToLayer: function(feature, latlng) {
                    return L.marker(latlng);
                },
                onEachFeature: onEachFeature
            }).addTo(map);
        });
    </script>
</body>

</html>

